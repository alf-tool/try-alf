<h1>Restrict</h1>

<p>Predicate-based filtering</p>

<h2>Signature</h2>
<div class="highlight"><pre><span class="n">restrict</span><span class="p">(</span><span class="n">operand</span><span class="p">:</span> <span class="no">Relation</span><span class="p">,</span> <span class="n">predicate</span><span class="p">:</span> <span class="no">Predicate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">Relation</span>
</pre>
</div>

<h2>Examples</h2>
<div class="highlight"><pre><span class="n">restrict</span><span class="p">(</span><span class="n">suppliers</span><span class="p">,</span> <span class="n">city</span><span class="p">:</span> <span class="s1">&#39;Paris&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span>
</pre>
</div>

<div class="try-this"><a href="/?src=cmVzdHJpY3Qoc3VwcGxpZXJzLCBjaXR5OiAnUGFyaXMnLCBzdGF0dXM6IDIw
KQ==
" target="_blank">Try it!</a></div>
<div class="highlight"><pre><span class="n">restrict</span><span class="p">(</span><span class="n">suppliers</span><span class="p">,</span> <span class="n">eq</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="s1">&#39;Paris&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">gt</span><span class="p">(</span><span class="ss">:status</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
</pre>
</div>

<div class="try-this"><a href="/?src=cmVzdHJpY3Qoc3VwcGxpZXJzLCBlcShjaXR5OiAnUGFyaXMnKSAmIGd0KDpz
dGF0dXMsIDIwKSk=
" target="_blank">Try it!</a></div>
<div class="highlight"><pre><span class="n">restrict</span><span class="p">(</span><span class="n">suppliers</span><span class="p">,</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">){</span> <span class="n">t</span><span class="o">.</span><span class="n">city</span> <span class="o">==</span> <span class="s1">&#39;Paris&#39;</span> <span class="ow">and</span> <span class="n">t</span><span class="o">.</span><span class="n">status</span> <span class="o">&gt;</span> <span class="mi">20</span> <span class="p">})</span>
</pre>
</div>

<div class="try-this"><a href="/?src=cmVzdHJpY3Qoc3VwcGxpZXJzLCAtPih0KXsgdC5jaXR5ID09ICdQYXJpcycg
YW5kIHQuc3RhdHVzID4gMjAgfSk=
" target="_blank">Try it!</a></div>

<h2>Description</h2>

<p>Computes a relation as a subset of <code>operand</code> tuples for which a tuple
predicate evaluates to TRUE.</p>

<h2>Implementation notes</h2>

<p>As of current Alf version, native predicates (through ruby <code>Proc</code> objects)
cannot be optimized nor compiled to SQL. The use of predicate factories
(<code>eq</code>, <code>gt</code>, etc.) is strongly recommanded.</p>
