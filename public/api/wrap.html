<h1>Wrap</h1>

<p>Tuple-valued attribute</p>

<h2>Signature</h2>
<div class="highlight"><pre><span class="n">wrap</span><span class="p">(</span><span class="n">operand</span><span class="p">:</span> <span class="no">Relation</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="no">AttrList</span><span class="p">,</span> <span class="n">as</span><span class="p">:</span> <span class="no">AttrName</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">Relation</span>
</pre>
</div>

<h2>Examples</h2>
<div class="highlight"><pre><span class="n">wrap</span><span class="p">(</span><span class="n">suppliers</span><span class="p">,</span> <span class="o">[</span><span class="ss">:city</span><span class="p">,</span> <span class="ss">:status</span><span class="o">]</span><span class="p">,</span> <span class="ss">:extra</span><span class="p">)</span>
</pre>
</div>

<div class="try-this"><a href="/?src=d3JhcChzdXBwbGllcnMsIFs6Y2l0eSwgOnN0YXR1c10sIDpleHRyYSk=
" target="_blank">Try it!</a></div>
<div class="highlight"><pre><span class="n">wrap</span><span class="p">(</span><span class="n">suppliers</span><span class="p">,</span> <span class="o">[</span><span class="ss">:city</span><span class="p">,</span> <span class="ss">:status</span><span class="o">]</span><span class="p">,</span> <span class="ss">:extra</span><span class="p">,</span> <span class="n">allbut</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span>
</pre>
</div>

<div class="try-this"><a href="/?src=d3JhcChzdXBwbGllcnMsIFs6Y2l0eSwgOnN0YXR1c10sIDpleHRyYSwgYWxs
YnV0OiB0cnVlKQ==
" target="_blank">Try it!</a></div>

<h2>Description</h2>

<p>Computes the relation obtained by removing <code>attributes</code> and replacing them
by a single attribute (<code>as</code>). The latter is a tuple-valued attribute
obtained by projecting the input tuple on <code>attributes</code>.</p>

<p>This operators supports an ALL BUT variant, through the <code>allbut</code> option.
When set to true, the operator keeps specified attributes and wraps all the
remaining ones as a tuple-valued attribute.</p>

<h2>Implementation notes</h2>

<p>This operator does not compile to SQL so far. Contributions are welcome to
provide it with a SQL compilation for SQL DBMSs that support this kind of
feature (e.g. PostgreSQL with JSON data type)</p>
